(window.wpshopify=window.wpshopify||[]).push([["CartFooter"],{"../../../../../devil/devilbox-new/data/www/wpshopify-components/components/cart/footer/index.jsx":function(e,t,n){"use strict";n.r(t);var a=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(a),s=n("./node_modules/react/index.js"),c=n.n(s),r=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/components/shop/_state/context.js"),i=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/components/cart/_state/context.js"),l=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/node_modules/@babel/runtime/regenerator/index.js"),p=n.n(l),u=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/node_modules/@babel/runtime/helpers/asyncToGenerator.js"),d=n.n(u),w=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/components/loader/index.jsx"),m=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/common/utils/index.js"),b=n("../../../../../devil/devilbox-new/data/www/wpshopify-api/index.js"),y=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/node_modules/lodash/isEmpty.js"),f=n.n(y),h=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/node_modules/await-to-js/dist/await-to-js.es5.js");function E(){var e=Object(s.useContext)(r.a),t=o()(e,1)[0],n=Object(s.useContext)(i.a),a=o()(n,2),l=a[0],u=a[1];function w(){return t.isMobile?(u({type:"SET_IS_CHECKING_OUT",payload:!1}),"_self"):("_blank"===t.settings.checkoutButtonTarget&&u({type:"SET_IS_CHECKING_OUT",payload:!1}),t.settings.checkoutButtonTarget)}function y(e){var n;window.open((n=e.webUrl,t.info.primaryDomain.url+function(e){return e.split("myshopify.com")[1]}(n)),w())}function E(e){if(!t.settings.enableCustomCheckoutDomain||!e.webUrl.includes("myshopify.com"))return function(e){window.open(e.webUrl,w())}(e);y(e)}function x(){return(x=d()(p.a.mark(function e(){var t,n,a,s,c,r,i,d;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u({type:"UPDATE_NOTICES",payload:[]}),u({type:"SET_IS_CHECKING_OUT",payload:!0}),Object(m.g)()&&wp.hooks.doAction("on.checkout",l.checkoutCache),e.next=5,Object(h.a)(Object(b.v)(l.checkoutCache.lineItems));case 5:if(t=e.sent,n=o()(t,2),a=n[0],s=n[1],!a){e.next=12;break}return u({type:"SET_IS_CHECKING_OUT",payload:!1}),e.abrupt("return",u({type:"UPDATE_NOTICES",payload:{type:"error",message:a}}));case 12:if(!f()(s.lineItems)){e.next=15;break}return u({type:"SET_IS_CHECKING_OUT",payload:!1}),e.abrupt("return",u({type:"UPDATE_NOTICES",payload:{type:"error",message:"No line items exist "}}));case 15:if((!WP_Shopify.misc.isPro||f()(l.customAttributes))&&f()(l.note)){e.next=26;break}return e.next=18,Object(h.a)(Object(b.A)({customAttributes:l.customAttributes,note:l.note}));case 18:if(c=e.sent,r=o()(c,2),i=r[0],d=r[1],!i){e.next=25;break}return u({type:"SET_IS_CHECKING_OUT",payload:!1}),e.abrupt("return",u({type:"UPDATE_NOTICES",payload:{type:"error",message:i}}));case 25:return e.abrupt("return",E(d));case 26:E(s);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,{name:"cart.checkout.before",args:[l]}),c.a.createElement(C,{cartState:l,onCheckout:function(){return x.apply(this,arguments)},buttonStyle:function(){return{backgroundColor:t.settings.cart.checkoutButtonColor}}}),c.a.createElement(m.a,{name:"cart.checkout.after",args:[l]}))}function C(e){var t=e.cartState,n=e.buttonStyle,a=e.onCheckout;return c.a.createElement("button",{className:"wps-btn wps-btn-checkout",onClick:a,"data-wps-is-ready":t.isReady,disabled:t.isCheckingOut||!t.termsAccepted||t.isCartEmpty,style:n()},t.isCheckingOut?c.a.createElement(w.a,{isLoading:t.isCheckingOut}):t.checkoutText)}var x=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/node_modules/use-debounce/esm/useDebounce.js");function v(){var e=Object(s.useContext)(i.a),t=o()(e,2),n=(t[0],t[1]),a=Object(s.useContext)(r.a),l=o()(a,2),p=l[0],u=(l[1],Object(s.useState)("")),d=o()(u,2),w=d[0],b=d[1],y=Object(x.a)(w,250),f=o()(y,1)[0],h=Object(s.useRef)(!0);return Object(s.useEffect)(function(){h.current?h.current=!1:(Object(m.g)()&&wp.hooks.doAction("on.checkout.note",f),WP_Shopify.misc.isPro&&n({type:"SET_CHECKOUT_NOTE",payload:f}))},[f]),c.a.createElement("section",{className:"wps-cart-notes"},c.a.createElement("label",{value:"Checkout notes",htmlFor:"wps-input-notes"},Object(m.g)()?wp.hooks.applyFilters("default.cart.notes.label","Notes:"):"Notes:"),c.a.createElement("textarea",{placeholder:p.settings.cart.cartNotesPlaceholder,id:"wps-input-notes",className:"wps-input wps-input-textarea",onChange:function(e){b(e.target.value)}}))}function j(){var e=Object(s.useContext)(r.a),t=o()(e,1)[0],n=Object(s.useContext)(i.a),a=o()(n,2),l=(a[0],a[1]),p=Object(s.useState)(!1),u=o()(p,2),d=u[0],w=u[1];return Object(s.useEffect)(function(){l({type:"SET_TERMS_ACCEPTED",payload:!1})},[]),c.a.createElement("section",{className:"wps-cart-terms container"},c.a.createElement("div",{className:"wps-input-row row"},c.a.createElement("input",{onChange:function(e){w(!d),WP_Shopify.misc.isPro&&l({type:"SET_TERMS_ACCEPTED",payload:!d})},id:"wps-input-terms",defaultChecked:d,type:"checkbox",className:"wps-input wps-input-checkbox"}),c.a.createElement("label",{dangerouslySetInnerHTML:{__html:t.settings.cart.cartTermsContent},htmlFor:"wps-input-terms",className:"col-11 wps-input-label wps-input-terms"})))}var _=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/components/notices/index.jsx"),O=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/common/pricing/formatting.js"),T=n("../../../../../devil/devilbox-new/data/www/wpshopify-components/common/animations/index.js");function g(e){var t=e.isReady,n=e.totalElement,a=e.currencyCode,r=Object(T.e)(T.c),l=Object(s.useContext)(i.a),p=o()(l,1)[0];return Object(s.useEffect)(function(){t&&r(n.current)},[p.total]),c.a.createElement("div",{className:"baseline row align-items-end justify-content-between m-0"},c.a.createElement("p",{className:"wps-total-prefix p-0"},"Subtotal:"),c.a.createElement("p",{className:"wps-total-amount col p-0",ref:n,"data-wps-is-ready":t},t&&Object(O.a)(p.total,a)))}t.default=function(){var e=Object(s.useContext)(r.a),t=o()(e,1)[0],n=Object(s.useContext)(i.a),a=o()(n,1)[0],l=Object(s.useRef)();return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"wps-cart-footer"},t.settings.cart.enableCartNotes&&c.a.createElement(v,null),t.settings.cart.enableCartTerms&&c.a.createElement(j,null),!f()(a.notices)&&c.a.createElement(_.a,{notices:a.notices,noticeGroup:"cart"}),c.a.createElement(g,{isReady:a.isReady,currencyCode:t.info.currencyCode,totalElement:l}),c.a.createElement(E,null)))}}}]);